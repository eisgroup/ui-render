@import "_mixins";
@import "_layout";
@import "input";

.app__upload {
  &:extend(.flex--fill);
  &:extend(.full-width);
  &:extend(.align-center);

  .app__view--close__icon {
    .square(size(20));
  }

  h2 {
    width: 100%;
    margin: 0;
    padding: @padding-base;
    background: @color-shadow;
  }
}

.upload__dropzone {
  &:extend(.flex--fill);
  &:extend(.align-center);
  min-height: 7rem;
  padding: @padding-base;
  border: 1px dashed @input-color;
  color: @input-color;

  .inverted & {
    border-color: @input-color-inverse;
    color: @input-color-inverse;
  }

  &:hover, &:focus, &:active, &.active {
    border-style: solid;
    border-color: @input-color-active;
    background-color: @color-shadow;
    color: @input-color-active;
    cursor: pointer;
    outline: none;

    .inverted & {
      border-color: @input-color-active-inverse;
      color: @input-color-active-inverse;
    }
  }

  &.disabled {
    opacity: 0.75;
  }

  .upload-grid.error & {
    border-color: @color-error !important;
    color: @color-error !important;

    .inverted & {
      border-color: @color-error-light !important;
      color: @color-error-light !important;
    }

    &:focus {
      .outline(@color: @color-error; @color-inverse: @color-error-light);
    }
  }

  .app__modal__box__content & {
    border-bottom-left-radius: @radius-large;
    border-bottom-right-radius: @radius-large;
  }
}

.upload__file__add,
.upload__file__remove {
  &:extend(.position-absolute all);
  &:extend(.bg-white all);
  &:extend(.round all);
  bottom: -@margin-smaller;
  right: -@margin-smaller;

  @{select-interaction} {
    border-radius: @radius-round !important;
  }
}

.upload__file__add {
  //&:extend(.text.primary all);
}

.upload__file__label {
  &:extend(.position-top-left);
  &:extend(.padding-small);

  .preview &,
  .inverted & {
    &:extend(.text-shadow-soft);
    &:extend(.text.bold);
    color: @color-white;
  }
}

.upload-grid {
  &:extend(.flex--row all);
  &:extend(.flex--row.justify--around all);
  &:extend(.flex--row.wrap all);
  &:extend(.no-padding all);
  color: @color-text-grey;
}

.upload-grid__item {
  @paddingBetweenFiles: @padding-base;
  height: 0;

  .count-1 > & {
    &:extend(.full-width);
    padding-bottom: 100%;
  }

  .count-3 > &,
  .count-5 > &,
  .count-6 > &,
  .count-7 > &,
  .count-9 > & {
    @size: calc(100% / 3 - @paddingBetweenFiles);
    width: @size;
    padding-bottom: @size;
  }

  .count-2 > &,
  .count-4 > &,
  .count-8 > & {
    @size: calc(100% / 2 - @paddingBetweenFiles);
    width: @size;
    padding-bottom: @size;
  }

  > .app__upload {
    &:extend(.position-fill);
  }

  &.preview {
    .upload__dropzone {
      @{select-interaction-not} {
        border: none;
      }
    }
  }

  .upload__dropzone {
    &:extend(.no-padding all);
    &:extend(.bg-grey-light all);
    border-radius: @radius-large !important;

    .upload__file {
      &:extend(.full-width all);
      &:extend(.full-height all);
      &:extend(.radius-large all);
      &:extend(.bg-image all);
    }
  }
}
